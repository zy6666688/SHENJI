# 🗺️ 项目路线图

> 审计数智析的发展规划和功能路线图

## 📍 当前状态

**版本**: v1.2.0-alpha  
**开发阶段**: Week 4 - 工作流引擎完善 & 前端准备  
**完成度**: 65%

### ✅ 已完成功能
- [x] 项目基础架构搭建
- [x] 前后端通信机制
- [x] H5 + 小程序双端支持
- [x] 基础节点图编辑器
- [x] 统一API响应格式
- [x] 标准错误处理体系
- [x] 审计节点基类设计
- [x] **8个核心审计节点全部完成** ✨
  - [x] 固定资产盘点节点
  - [x] 应收账款函证节点
  - [x] 银行询证节点
  - [x] 存货监盘节点
  - [x] 收入截止性测试节点
  - [x] 关联方交易核查节点
  - [x] 期后事项核查节点
  - [x] 持续经营评估节点
- [x] **工作流引擎核心组件**
  - [x] NodeRegistryV2 - 节点注册管理
  - [x] ExecutionEngineV2 - 执行引擎
  - [x] DataBlock - 数据块管理
  - [x] DependencyGraph - 依赖图分析
  - [x] ParallelExecutor - 并行执行器
  - [x] CacheManager - 缓存管理
  - [x] TimeoutController - 超时控制
- [x] **插件系统**
  - [x] PluginSandbox - 安全沙箱
  - [x] PluginManager - 插件管理
  - [x] 权限与配额控制
- [x] **AI集成基础**
  - [x] PromptTemplate - 提示词模板
  - [x] OpenAIAdapter - AI适配器
- [x] **测试体系**
  - [x] 513个单元测试（100%通过）
  - [x] 测试覆盖率报告

### 🚧 进行中
- [ ] 工作流引擎增强功能
- [ ] 前端可视化编辑器准备

---

## 🎯 近期目标 (Week 1-4)

### Week 1: API优化完成 ✅
**目标**: 建立生产级API规范

- [x] ResponseFormatter - 统一API响应
- [x] ErrorCode - 完整错误码体系 (60+)
- [x] ErrorHandler - 全局错误处理中间件

### Week 2-3: 核心审计节点 ✅ 已完成
**目标**: 完成8个核心审计节点  
**状态**: ✅ 全部完成

**已完成节点**:
1. ✅ **固定资产盘点节点** - 资产盘点与差异分析
2. ✅ **应收账款函证节点** - 函证管理与回函核对
3. ✅ **银行询证节点** - 银行询证管理
4. ✅ **存货监盘节点** - 存货盘点记录
5. ✅ **收入截止性测试节点** - 跨期收入测试
6. ✅ **关联方交易核查节点** - 关联方交易分析
7. ✅ **期后事项核查节点** - 期后事项影响评估
8. ✅ **持续经营评估节点** - 持续经营能力评估

**测试成果**:
- 513个单元测试（100%通过）
- 测试覆盖率报告已生成
- PluginSandbox问题已修复

### Week 4: 工作流引擎增强 🚧
**目标**: 完善工作流功能

**核心组件** ✅:
- [x] NodeRegistryV2 - 节点注册表
- [x] ExecutionEngineV2 - 执行引擎
- [x] DataBlock - 节点间数据传递
- [x] DependencyGraph - 依赖分析
- [x] ParallelExecutor - 并行执行

**待完善功能**:
- [ ] 工作流可视化JSON格式定义
- [ ] 工作流保存/加载API
- [ ] 执行历史记录
- [ ] 错误回滚机制
- [ ] 断点续传功能

---

## 🚀 中期目标 (Week 5-8)

### Week 5-6: 前端编辑器
**目标**: 可视化工作流编辑

- [ ] 节点拖拽编辑
- [ ] 连线管理
- [ ] 节点配置面板
- [ ] 工作流保存/加载

### Week 7: 生产环境配置
**目标**: 一次性配置生产环境

- [ ] SSL证书配置
- [ ] 服务器部署
- [ ] 域名配置
- [ ] 数据库迁移

### Week 8: 测试与上线
**目标**: 完整测试并正式发布

- [ ] 完整功能测试
- [ ] 性能测试
- [ ] 安全测试
- [ ] 正式上线

---

## 🔮 长期规划 (v1.2-v2.0)

### v1.2 (3个月后)
**AI智能分析增强**

- [ ] AI风险识别
- [ ] 智能审计建议
- [ ] 异常交易检测
- [ ] 自然语言查询

### v1.5 (6个月后)
**协作功能增强**

- [ ] 实时多人协作
- [ ] 评论与批注
- [ ] 工作流版本控制
- [ ] 审核流程管理

### v2.0 (1年后)
**企业级功能**

- [ ] 多租户支持
- [ ] 权限精细控制
- [ ] 审计报告自动生成
- [ ] 数据可视化大屏
- [ ] 移动端原生App

---

## 📊 功能清单

### 核心功能

| 功能模块 | 状态 | 优先级 | 预计完成 |
|---------|------|-------|---------|
| **API优化** | ✅ 完成 | P0 | Week 1 |
| **核心审计节点** | 🚧 进行中 (1/8) | P0 | Week 2-3 |
| **工作流引擎** | ⏳ 待开始 | P0 | Week 4 |
| **前端编辑器** | ⏳ 待开始 | P1 | Week 5-6 |
| **AI集成** | ⏳ 待开始 | P1 | Week 8+ |
| **协作功能** | ⏳ 待开始 | P2 | v1.2 |
| **移动App** | ⏳ 待开始 | P3 | v2.0 |

### 审计节点清单

| 节点名称 | 功能描述 | 状态 | 负责人 | 工期 |
|---------|---------|------|-------|------|
| 固定资产盘点 | 资产盘点与差异分析 | ✅ | AI助手 | 已完成 |
| 应收账款函证 | 函证管理与核对 | ⏳ | 待分配 | 3天 |
| 银行询证 | 银行询证管理 | ⏳ | 待分配 | 3天 |
| 存货监盘 | 存货盘点记录 | ⏳ | 待分配 | 2天 |
| 收入截止性 | 跨期收入测试 | ⏳ | 待分配 | 2天 |
| 关联方交易 | 关联方核查 | ⏳ | 待分配 | 3天 |
| 期后事项 | 期后事项核查 | ⏳ | 待分配 | 2天 |
| 持续经营 | 持续经营评估 | ⏳ | 待分配 | 3天 |

---

## 💼 技术规划

### 架构演进

**v1.0-v1.2**: 单体应用
- 前后端分离
- 单一数据库
- 简单部署

**v1.3-v1.5**: 微服务化
- 服务拆分
- 消息队列引入
- 缓存优化

**v2.0+**: 云原生
- 容器化部署
- 自动扩缩容
- 多区域部署

### 技术债务清理

- [ ] TypeScript类型完善
- [ ] 单元测试覆盖率提升到90%
- [ ] API文档自动生成
- [ ] 性能监控体系
- [ ] 日志系统优化

---

## 📋 交付标准

### 节点开发标准
每个审计节点必须包含:
1. ✅ 完整的TypeScript类型定义
2. ✅ Excel导入/导出功能
3. ✅ 审计工作底稿生成
4. ✅ 单元测试（覆盖率>80%）
5. ✅ 使用文档

### 代码质量标准
- ✅ 通过ESLint检查
- ✅ 通过TypeScript类型检查
- ✅ 单元测试覆盖率>80%
- ✅ 代码审查通过
- ✅ 性能测试达标

---

## 🎯 里程碑

### M1: API规范化 ✅
**时间**: Week 1  
**目标**: 建立生产级API规范  
**状态**: 已完成

### M2: 核心节点完成
**时间**: Week 2-3  
**目标**: 8个核心审计节点全部完成  
**状态**: 进行中 (1/8)

### M3: 工作流引擎
**时间**: Week 4  
**目标**: 工作流执行引擎完成  
**状态**: 待开始

### M4: MVP上线
**时间**: Week 8  
**目标**: 可用的MVP版本上线  
**状态**: 待开始

### M5: 企业级功能
**时间**: v2.0  
**目标**: 完整的企业级审计平台  
**状态**: 规划中

---

## 🤝 如何贡献

查看具体节点任务？参考 [docs/guides/从0到落地完整指南.md](docs/guides/从0到落地完整指南.md)

想要参与开发？查看 [CONTRIBUTING.md](CONTRIBUTING.md)

有问题或建议？提交 [Issue](https://github.com/zy6666688/SHENJI/issues)

---

**最后更新**: 2025-12-03  
**下次更新**: Week 2 节点完成后
